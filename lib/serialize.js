const _0x3ccaa3=_0x37f6;function _0x5d31(){const _0x2f4d7c=['listResponseMessage','contextInfo','logger','1608bhyhGo','node-fetch','caption','from','7456824XlPEcd','1050LCtExp','19674pxoNQL','alloc','document','Result\x20is\x20not\x20a\x20buffer','ephemeral','path','author','quotedMessage','download','sender','223179PCkorv','string','@g.us','promises','client','join','writeFile','log','message','test','buffer','selectedId','buttonsMessage','user','keys','fromMe','text','templateMessage','sticker','1062530hbDFXZ','split','file-type','templateButtonReplyMessage','9162sXZCID','audio','sendVideoAsSticker','15090ZEdXPQ','selectedButtonId','application/octet-stream','isBuffer','existsSync','513873XNGhRm','mentions','quoted','../','buttonsResponseMessage','1924002MEUMhM','mtype','hydratedTemplate','@whiskeysockets/baileys','viewOnceMessage','stanzaId','base64','key','participant','concat','hydratedContentText','readFileSync','toString','sendMessage','ephemeralMessage','4StNdbx','8FGnWuV','isSelf','body','type','endsWith','image','../config','singleSelectReply','packname'];_0x5d31=function(){return _0x2f4d7c;};return _0x5d31();}(function(_0x7a9411,_0x41d1ff){const _0xd22d1a=_0x37f6,_0x4b6e94=_0x7a9411();while(!![]){try{const _0xd17f50=-parseInt(_0xd22d1a(0x121))/0x1*(-parseInt(_0xd22d1a(0x135))/0x2)+-parseInt(_0xd22d1a(0x126))/0x3*(parseInt(_0xd22d1a(0x136))/0x4)+-parseInt(_0xd22d1a(0x147))/0x5*(-parseInt(_0xd22d1a(0x148))/0x6)+parseInt(_0xd22d1a(0x115))/0x7+-parseInt(_0xd22d1a(0x146))/0x8+parseInt(_0xd22d1a(0x119))/0x9*(-parseInt(_0xd22d1a(0x11c))/0xa)+parseInt(_0xd22d1a(0x152))/0xb*(parseInt(_0xd22d1a(0x142))/0xc);if(_0xd17f50===_0x41d1ff)break;else _0x4b6e94['push'](_0x4b6e94['shift']());}catch(_0x2c27f7){_0x4b6e94['push'](_0x4b6e94['shift']());}}}(_0x5d31,0xcc14f));const {downloadContentFromMessage,getContentType}=require(_0x3ccaa3(0x129)),fs=require('fs'),fetch=require(_0x3ccaa3(0x143)),{fromBuffer}=require(_0x3ccaa3(0x117)),{SUDO}=require(_0x3ccaa3(0x13c));function _0x37f6(_0x3dcffe,_0x5ecc85){const _0x5d31ab=_0x5d31();return _0x37f6=function(_0x37f6b6,_0x1ae9f5){_0x37f6b6=_0x37f6b6-0x10e;let _0x5a234e=_0x5d31ab[_0x37f6b6];return _0x5a234e;},_0x37f6(_0x3dcffe,_0x5ecc85);}let path=require(_0x3ccaa3(0x14d));const {writeExifImg,writeExifVid,imageToWebp,videoToWebp}=require('./sticker'),downloadMedia=(_0x2f709c,_0x316a2e)=>new Promise(async(_0x34a138,_0x3022f4)=>{const _0x3a863c=_0x3ccaa3;let _0x5429e2=Object[_0x3a863c(0x110)](_0x2f709c)[0x0],_0x5b3293={'imageMessage':_0x3a863c(0x13b),'videoMessage':'video','stickerMessage':_0x3a863c(0x114),'documentMessage':_0x3a863c(0x14a),'audioMessage':_0x3a863c(0x11a)},_0x2f2405=_0x2f709c;_0x5429e2==_0x3a863c(0x113)&&(_0x2f2405=_0x2f709c[_0x3a863c(0x113)]['hydratedFourRowTemplate'],_0x5429e2=Object[_0x3a863c(0x110)](_0x2f2405)[0x0]);_0x5429e2==_0x3a863c(0x10e)&&(_0x2f2405=_0x2f709c[_0x3a863c(0x10e)],_0x5429e2=Object['keys'](_0x2f2405)[0x0]);try{if(_0x316a2e){const _0x50bdc6=await downloadContentFromMessage(_0x2f2405[_0x5429e2],_0x5b3293[_0x5429e2]);let _0x23d434=Buffer[_0x3a863c(0x145)]([]);for await(const _0xbe0faa of _0x50bdc6){_0x23d434=Buffer['concat']([_0x23d434,_0xbe0faa]);}await fs[_0x3a863c(0x155)][_0x3a863c(0x158)](_0x316a2e,_0x23d434),_0x34a138(_0x316a2e);}else{const _0x263f36=await downloadContentFromMessage(_0x2f2405[_0x5429e2],_0x5b3293[_0x5429e2]);let _0x366daa=Buffer[_0x3a863c(0x145)]([]);for await(const _0x3a1f43 of _0x263f36){_0x366daa=Buffer[_0x3a863c(0x12f)]([_0x366daa,_0x3a1f43]);}_0x34a138(_0x366daa);}}catch(_0x3a0aa0){_0x3022f4(_0x3a0aa0);}});async function serialize(_0x2ade94,_0x377701){const _0x24f354=_0x3ccaa3;_0x377701[_0x24f354(0x141)]={..._0x377701['logger'],'info'(){const _0x32131a=_0x24f354;console[_0x32131a(0x159)]();},'error'(){const _0x440b84=_0x24f354;console[_0x440b84(0x159)]();},'warn'(){const _0x2d75d8=_0x24f354;console[_0x2d75d8(0x159)]();}};let _0x9e01d3=_0x377701[_0x24f354(0x10f)]['id'][_0x24f354(0x116)]('@')[0x0];_0x2ade94['sudo']=[SUDO,_0x9e01d3[_0x24f354(0x116)](':')[0x0]][_0x24f354(0x132)]()[_0x24f354(0x116)](',');_0x2ade94[_0x24f354(0x12d)]&&(_0x2ade94['id']=_0x2ade94[_0x24f354(0x12d)]['id'],_0x2ade94[_0x24f354(0x137)]=_0x2ade94[_0x24f354(0x12d)][_0x24f354(0x111)],_0x2ade94[_0x24f354(0x145)]=_0x2ade94[_0x24f354(0x12d)]['remoteJid'],_0x2ade94['isGroup']=_0x2ade94[_0x24f354(0x145)][_0x24f354(0x13a)](_0x24f354(0x154)),_0x2ade94[_0x24f354(0x151)]=_0x2ade94['isGroup']?_0x2ade94['key'][_0x24f354(0x12e)]:_0x2ade94['isSelf']?_0x377701[_0x24f354(0x10f)]['id']:_0x2ade94[_0x24f354(0x145)]);if(_0x2ade94[_0x24f354(0x15a)]){_0x2ade94[_0x24f354(0x139)]=getContentType(_0x2ade94[_0x24f354(0x15a)]);if(_0x2ade94[_0x24f354(0x139)]===_0x24f354(0x134)){_0x2ade94[_0x24f354(0x15a)]=_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x15a)];const _0x40e1a2=Object[_0x24f354(0x110)](_0x2ade94[_0x24f354(0x15a)])[0x0];_0x2ade94[_0x24f354(0x139)]=_0x40e1a2,_0x40e1a2===_0x24f354(0x12a)&&(_0x2ade94['message']=_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x15a)],_0x2ade94['type']=getContentType(_0x2ade94[_0x24f354(0x15a)]));}_0x2ade94[_0x24f354(0x139)]===_0x24f354(0x12a)&&(_0x2ade94['message']=_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x15a)],_0x2ade94[_0x24f354(0x139)]=getContentType(_0x2ade94[_0x24f354(0x15a)]));try{_0x2ade94[_0x24f354(0x122)]=_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x140)]?_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x140)]['mentionedJid']||[]:[];}catch{_0x2ade94[_0x24f354(0x122)]=![];}try{const _0x1e473a=_0x2ade94['message'][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x140)];let _0x2ea8ae;if(_0x1e473a&&_0x1e473a[_0x24f354(0x14f)]){if(_0x1e473a[_0x24f354(0x14f)][_0x24f354(0x134)])_0x2ea8ae=Object[_0x24f354(0x110)](_0x1e473a[_0x24f354(0x14f)][_0x24f354(0x134)][_0x24f354(0x15a)])[0x0],_0x2ade94[_0x24f354(0x123)]={'type':_0x2ea8ae===_0x24f354(0x12a)?'view_once':_0x24f354(0x14c),'stanzaId':_0x1e473a['stanzaId'],'sender':_0x1e473a[_0x24f354(0x12e)],'message':_0x2ea8ae==='viewOnceMessage'?_0x1e473a['quotedMessage']['ephemeralMessage'][_0x24f354(0x15a)][_0x24f354(0x12a)]['message']:_0x1e473a[_0x24f354(0x14f)][_0x24f354(0x134)][_0x24f354(0x15a)]};else _0x1e473a[_0x24f354(0x14f)]['viewOnceMessage']?_0x2ade94['quoted']={'type':'view_once','stanzaId':_0x1e473a[_0x24f354(0x12b)],'sender':_0x1e473a[_0x24f354(0x12e)],'message':_0x1e473a[_0x24f354(0x14f)]['viewOnceMessage'][_0x24f354(0x15a)]}:_0x2ade94['quoted']={'type':'normal','stanzaId':_0x1e473a['stanzaId'],'sender':_0x1e473a[_0x24f354(0x12e)],'message':_0x1e473a[_0x24f354(0x14f)]};_0x2ade94[_0x24f354(0x123)][_0x24f354(0x137)]=_0x2ade94[_0x24f354(0x123)][_0x24f354(0x151)]===_0x377701[_0x24f354(0x10f)]['id'],_0x2ade94[_0x24f354(0x123)][_0x24f354(0x127)]=Object[_0x24f354(0x110)](_0x2ade94[_0x24f354(0x123)][_0x24f354(0x15a)]),_0x2ade94[_0x24f354(0x123)]['text']=_0x2ade94[_0x24f354(0x123)]['message'][_0x2ade94['quoted']['mtype']]?.[_0x24f354(0x112)]||_0x2ade94['quoted'][_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x123)]['mtype']]?.['description']||_0x2ade94[_0x24f354(0x123)][_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x123)][_0x24f354(0x127)]]?.['caption']||_0x2ade94[_0x24f354(0x123)][_0x24f354(0x127)]===_0x24f354(0x118)&&_0x2ade94[_0x24f354(0x123)][_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x123)]['mtype']][_0x24f354(0x128)]?.[_0x24f354(0x130)]||_0x2ade94[_0x24f354(0x123)][_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x123)]['mtype']]||'',_0x2ade94['quoted'][_0x24f354(0x12d)]={'id':_0x2ade94[_0x24f354(0x123)][_0x24f354(0x12b)],'fromMe':_0x2ade94[_0x24f354(0x123)][_0x24f354(0x137)],'remoteJid':_0x2ade94['from']},_0x2ade94[_0x24f354(0x123)][_0x24f354(0x150)]=_0x35d1c9=>downloadMedia(_0x2ade94['quoted'][_0x24f354(0x15a)],_0x35d1c9);}}catch(_0x21df98){console[_0x24f354(0x159)](_0x21df98),_0x2ade94[_0x24f354(0x123)]=null;}try{_0x2ade94[_0x24f354(0x138)]=_0x2ade94['message']['conversation']||_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x112)]||_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x144)]||_0x2ade94[_0x24f354(0x139)]===_0x24f354(0x13f)&&_0x2ade94[_0x24f354(0x15a)][_0x2ade94['type']][_0x24f354(0x13d)]['selectedRowId']||_0x2ade94[_0x24f354(0x139)]===_0x24f354(0x125)&&_0x2ade94['message'][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x11d)]&&_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]]['selectedButtonId']||_0x2ade94['type']===_0x24f354(0x118)&&_0x2ade94[_0x24f354(0x15a)][_0x2ade94[_0x24f354(0x139)]][_0x24f354(0x15d)]||![];}catch{_0x2ade94[_0x24f354(0x138)]=![];}_0x2ade94[_0x24f354(0x150)]=_0xceedc8=>downloadMedia(_0x2ade94['message'],_0xceedc8),_0x377701[_0x24f354(0x156)]=_0x2ade94,_0x377701['getFile']=async(_0x2d47f8,_0x54ca3a)=>{const _0x37b520=_0x24f354;let _0x5ee3e4,_0xf537ef,_0x68f292=Buffer[_0x37b520(0x11f)](_0x2d47f8)?_0x2d47f8:/^data:.*?\/.*?;base64,/i['test'](_0x2d47f8)?Buffer[_0x37b520(0x145)](_0x2d47f8[_0x37b520(0x116)]`,`[0x1],_0x37b520(0x12c)):/^https?:\/\//[_0x37b520(0x15b)](_0x2d47f8)?await(_0x5ee3e4=await fetch(_0x2d47f8))[_0x37b520(0x15c)]():fs[_0x37b520(0x120)](_0x2d47f8)?(_0xf537ef=_0x2d47f8,fs[_0x37b520(0x131)](_0x2d47f8)):typeof _0x2d47f8===_0x37b520(0x153)?_0x2d47f8:Buffer[_0x37b520(0x149)](0x0);if(!Buffer[_0x37b520(0x11f)](_0x68f292))throw new TypeError(_0x37b520(0x14b));let _0x3014d9=await fromBuffer(_0x68f292)||{'mime':_0x37b520(0x11e),'ext':'.bin'};if(_0x68f292&&_0x54ca3a&&!_0xf537ef)_0xf537ef=path[_0x37b520(0x157)](__dirname,_0x37b520(0x124)+new Date()*0x1+'.'+_0x3014d9['ext']),await fs[_0x37b520(0x155)][_0x37b520(0x158)](_0xf537ef,_0x68f292);return{'res':_0x5ee3e4,'filename':_0xf537ef,..._0x3014d9,'data':_0x68f292};},_0x377701['sendImageAsSticker']=async(_0x4d51c4,_0x4b0da2,_0x531b31={})=>{const _0x137703=_0x24f354;let _0x1af3a8;_0x531b31&&(_0x531b31[_0x137703(0x13e)]||_0x531b31[_0x137703(0x14e)])?_0x1af3a8=await writeExifImg(_0x4b0da2,_0x531b31):_0x1af3a8=await imageToWebp(_0x4b0da2),await _0x377701[_0x137703(0x133)](_0x4d51c4,{'sticker':{'url':_0x1af3a8},..._0x531b31},_0x531b31);},_0x377701[_0x24f354(0x11b)]=async(_0x272f98,_0x203034,_0x170be8={})=>{const _0x2726f8=_0x24f354;let _0x25ebf2;_0x170be8&&(_0x170be8[_0x2726f8(0x13e)]||_0x170be8['author'])?_0x25ebf2=await writeExifVid(_0x203034,_0x170be8):_0x25ebf2=await videoToWebp(_0x203034),await _0x377701[_0x2726f8(0x133)](_0x272f98,{'sticker':{'url':_0x25ebf2},..._0x170be8},_0x170be8);};}return _0x2ade94;}module['exports']={'serialize':serialize,'downloadMedia':downloadMedia};
